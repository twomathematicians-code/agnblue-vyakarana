name: VyÄkaraá¹‡a CI â€” á¹¢aá¸vidha-PariÅ›uddhi

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  mantra-check:
    name: BÄ«ja-Mantra Verification
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Verify Core Attribution
        run: |
          echo "ğŸ” Checking Sanskrit Core files..."
          for file in agnblue/runtime/*.py; do
            if [ -f "$file" ]; then
              if ! grep -q "Crafted under the reverse-thinking spirit of Scitamehtam Maisu" "$file"; then
                echo "âŒ Missing BÄ«ja-Mantra in: $file"
                exit 1
              else
                echo "âœ“ Verified: $file"
              fi
            fi
          done
          echo "All mantras present - Siddhi achieved"

  test:
    name: Pariá¹£kÄra (Refinement)
    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: ["3.10", "3.11"]
    steps:
      - uses: actions/checkout@v4
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: ${{ matrix.python-version }}
      - name: Install
        run: pip install -e .
      - name: Test
        run: |
          python -c "from agnblue.runtime.dhÄtu import DhÄtu, Svara; print('DhÄtu import OK')"
          python -c "from agnblue.runtime.kÄraka import KÄrakaType; print('KÄraka import OK')"
          python -c "from agnblue.runtime.vÄkya import VÄkya; print('VÄkya import OK')"
          echo "All Sanskrit modules import correctly"